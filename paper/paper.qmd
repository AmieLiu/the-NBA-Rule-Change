---
title: "The Impact of the 2022-23 NBA Rule Change"
subtitle: "Exploring the Relationship Between the New Transitional Foul Rule, Player Shooting Performance, and MVP Points"
author: 
  - Amie Liu
thanks: "Code and data are available at: https://github.com/AmieLiu/the-NBA-Rule-Change.git."
date: today
date-format: long
abstract: "Rule changes in professional basketball play a critical role in shaping both strategies and player performances. Specifically, the introduction of the transitional foul rule in the 2022-23 NBA season, which changes the way fouls are called during transition plays, could significantly affect players' shooting efficiency and their prospects for MVP awards. This paper examines the implications of this rule change, comparing player statistics between the 2022-23 and 2021-22 seasons. We find significant correlations between shooting efficiency and MVP points, highlighting the rule's influence on player recognition. This paper offers insights into the interplay between rule modifications, player performance, and individual accolades, underscoring the broader significance of adapting to regulatory shifts in professional sports."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(knitr)
library(dplyr)
library(cowplot)

# Read data
analyzed_data2023 <- read_csv("../data/analysis_data/analysis_data2023.csv")
analyzed_data2022 <- read_csv("../data/analysis_data/analysis_data2022.csv")
```


# Introduction

In professional basketball, rule changes can reshape the game's landscape, altering strategies, player performances, and ultimately, the trajectory of teams' successes. The National Basketball Association (NBA), as the premier basketball league globally, often implements rule modifications to refine gameplay, increase scoring opportunities, and foster a more open and free-flowing style of basketball [@nba]. Under the new transitional foul rule in the 2022-23 NBA season, take fouls committed during transition scoring opportunities will result in one free throw and continued possession for the offended team [@rule], encouraging defenders to make legitimate plays. 


This paper analyzes the consequences of the 2022-23 NBA rule change, particularly its impact on player shooting performance and the dynamics of the Most Valuable Player (MVP) competition, comparing statistics with the previous season, 2021-22. Our estimand is to explore the relationship between player shooting performance and MVP points they won in these NBA seasons. We hypothesize that players who excel in transition offense may experience an increase in shooting efficiency as they capitalize on more fast-break opportunities without facing as many transition-take fouls, potentially leading to greater recognition in MVP voting due to the positive correlation between shooting efficiency and MVP consideration.

A clear gap exists in understanding the nuanced impacts of the new transitional foul rule on player performance and MVP considerations, especially when compared to the previous season. This paper seeks to fill this gap by thoroughly analyzing the statistical data from both the 2022-23 and 2021-22 NBA seasons to highlight the changes, continuities, and emerging trends over these times. To address this gap, we used the R programming language [@citeR] to analyze shooting performance metrics, such as field goal percentage (FG%), three-point percentage (3P%), free throw percentage (FT%), as well as MVP voting points won from both seasons. Our findings reveal patterns in player shooting performance, MVP points accumulation, and the intertwined effects of the transitional foul ruleâ€¦ We discovered significant correlations between shooting efficiency and MVP points, with distinct variations observed between the two seasons.

Understanding the implications of the transitional foul rule in comparison to the previous season is crucial for stakeholders across the NBA landscape, from players and coaches to researchers and fans. By illuminating the intricate relationship between rule changes, player performance, and individual accolades, this paper contributes to a deeper understanding of the evolving dynamics within the league.

This paper is structured into three main sections: Data, Results, and Discussion. @sec-data Data explores sources and methodology. It includes various sources used for data collection, cleaning, and analyzing processes, drawing from the dataset. In @sec-results Results, we present our findings, focusing on data visualizations and analyses. @sec-discussion Discussion provides a comprehensive analysis of our research, highlights the implications for NBA basketball, the importance of limitations and considerations in our analysis, and identifies areas for future research. @sec-conclusion Conclusion summarizes our main findings and the broader significance of our research. 


# Data {#sec-data}

Some of our data is of penguins (see @tbl-table2023 and @tbl-table2022).

```{r}
#| label: tbl-table2023
#| tbl-cap: 2022-2023 season most valuable player table 
#| echo: false
#| warning: false

# Display the "analyzed_data2023" dataset
analyzed_data2023 |>
  kable(
    # Give each column a name
    col.names = c("Rank", "MVP Points Won", "Field Goal Percentage", "Three Points Percentage", "Free Throw Percentage")
  )
```

```{r}
#| label: tbl-table2022
#| tbl-cap: 2021-2022 season most valuable player table
#| echo: false
#| warning: false

# Display the "analyzed_data2022" dataset
analyzed_data2022 |>
  kable(
    # Give each column a name
    col.names = c("Rank", "MVP Points Won", "Field Goal Percentage", "Three Points Percentage", "Free Throw Percentage")
  )
```

Talk more about it.

And also planes (@fig-planes). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)

Talk way more about it. 

## Data Visualization
### The distribution of MVP points won by top 10 players in the 2021-22 and 2022-23 seasons
```{r}
#| label: fig-points
#| fig-cap: Number of MVP points won by each player from the top 10 rankings in the 2021-22 and 2022-23 seasons
#| fig.width: 8 
#| echo: false
#| warning: false
#| message: false

# Create a bar chart to visualize the distribution of MVP points won by rank based on the analyzed_data2023 and analyzed_data2022 datasets

# Add a "Season" column to the 2022-23 dataset
analyzed_data2023 <- analyzed_data2023 |>
  mutate(season = "2022-23")

# Add a "Season" column to the 2021-22 dataset
analyzed_data2022 <- analyzed_data2022 |>
  mutate(season = "2021-22")

# Combine the 2022-23 and 2021-22 datasets
combined_data <- bind_rows(analyzed_data2023, analyzed_data2022)

# Create the bar plot with rank on the x-axis and season as fill color
combined_data |>
  ggplot(aes(x = factor(rank), fill = factor(season))) +
  # Add a grouped bar layer to create the grouped bar chart
  geom_bar(position = "dodge", aes(y = points_won), stat = "identity") +
  # Add text labels for the number of points won on top of each bar
  geom_text(aes(label = points_won, y = points_won), vjust = -0.5, size = 3, position = position_dodge(width = 0.9)) +
  # Scale the x-axis labels to display "Rank"
  scale_x_discrete("Rank") +
  # Scale the fill color to display "season" and specify the break points: 2021-22 Season", "2022-23 Season"
  scale_fill_discrete(name = "Season",
                      breaks = c("2021-22", "2022-23"),
                      labels = c("2021-22 Season", "2022-23 Season")) +
  # Apply a minimal theme to the chart
  theme_minimal() +
  # Label y-axis as "Number of MVP Points Won"
  labs(y = "Number of MVP Points Won")

```

### Different shooting performances by top 10 players in the 2021-22 and 2022-23 seasons
```{r}
#| echo: false
#| warning: false
#| message: false

# Create the scatter plot with trend line or smoothed line for "field_goal_percentage"
scatterplot1 <- 
  ggplot(combined_data, aes(x = rank, y = field_goal_percentage, color = season)) +
  geom_point() +  # Add points for each data point
  geom_smooth(method = "lm", se = FALSE) +  # Add a trend line (linear regression)
  # Scale the x-axis labels to display "Rank"
  scale_x_continuous(breaks = 1:10, labels = 1:10) +
  # Scale the y-axis labels to display "Field Goal Percentage"
  scale_y_continuous("Field Goal Percentage") +
  # Change legend title, position, and x-axis
  labs(color = "Season", x = "Rank") +
  theme_minimal()

```

```{r}
#| echo: false
#| warning: false
#| message: false

# Create the scatter plot with trend line or smoothed line for "three_points_percentage"
scatterplot2 <- 
  ggplot(combined_data, aes(x = rank, y = three_points_percentage, color = season)) +
  geom_point() +  # Add points for each data point
  geom_smooth(method = "lm", se = FALSE) +  # Add a trend line (linear regression)
  # Scale the x-axis labels to display "Rank"
  scale_x_continuous(breaks = 1:10, labels = 1:10) +
  # Scale the y-axis labels to display "Three Points Percentage"
  scale_y_continuous("Three Points Percentage") +
  # Change legend title,  position, and x-axis
  labs(color = "Season", x = "Rank") +
  theme_minimal()

```

```{r}
#| label: fig-percentage
#| fig-cap: "Different shooting percentage by each player from the top 10 rankings in the 2021-22 and 2022-23 seasons"
#| fig.height: 10
#| fig.width: 8 
#| echo: false
#| warning: false
#| message: false

# Create the scatter plot with trend line or smoothed line for "free_throw_percentage"
scatterplot3 <-
  ggplot(combined_data, aes(x = rank, y = free_throw_percentage, color = season)) +
  geom_point() +  # Add points for each data point
  geom_smooth(method = "lm", se = FALSE) +  # Add a trend line (linear regression)
  # Scale the x-axis labels to display "Rank"
  scale_x_continuous(breaks = 1:10, labels = 1:10) +
  # Scale the y-axis labels to display "Free Throw Percentage"
  scale_y_continuous("Free Throw Percentage") +
  # Change legend title, position, and x-axis
  labs(color = "Season", x = "Rank") +
  theme_minimal()

# Create the combined plot
combined_plot <- plot_grid(scatterplot1, scatterplot2, scatterplot3, ncol = 1)

combined_plot

```



# Model {#sec-model}

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results {#sec-results}

Our results are summarized in @tbl-modelresults. (see @fig-points)

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

model2023 <-
  readRDS(file = "../models/model2023.rds")

```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Summary of the model results"
#| warning: false

# Create a data frame containing the model summary information
model_summary <- tibble(
  "Variable" = c("(Intercept)", "field_goal_percentage", "three_points_percentage", "free_throw_percentage"),
  "Estimate" = c(-4628, 7399, 7410, -1640),
  "Std. Error" = c(2004, 1994, 3740, 1417),
  "t value" = c(-2.310, 3.712, 1.981, -1.158),
  "Pr(>|t|)" = c(0.06028, 0.00995, 0.09485, 0.29093)
)

# Convert the data frame to a modelsummary table
summary_table <- modelsummary(model_summary)

summary_table

```

```{r}
#| label: fig-modelresults
#| fig-cap: "Observed vs. predicted values of MVP points won"
#| fig.height: 10
#| fig.width: 8 
#| echo: false
#| warning: false
#| message: false

# Diagnostic plots
par(mfrow = c(2, 2))  # Arrange plots in a 2x2 grid
plot(model2023)  # Generate plots

# Create a data frame of observed vs. predicted values
predicted_values <- data.frame(Observed = analyzed_data2023$points_won, 
                               Predicted = predict(model2023))

# Plot observed vs. predicted values
ggplot(predicted_values, aes(x = Observed, y = Predicted)) +
  geom_point() +
  geom_abline(color = "red", linetype = "dashed") +  # Line x=y for reference
  labs(title = "Observed vs. Predicted MVP Voting Points",
       x = "Observed Points",
       y = "Predicted Points") +
  theme_minimal()
```


# Discussion {#sec-discussion}

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage


# Conclusion {#sec-conclusion}

\newpage


\appendix
# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 





\newpage


# References


